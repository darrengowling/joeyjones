<analysis>**original_problem_statement:**
The initial project was to stress test a fantasy sports auction platform for a 400-user UK pilot. The tests revealed severe performance bottlenecks (700ms+ latency) due to the US-hosted infrastructure. The project's focus then shifted to planning a migration to a UK/EU-based hosting provider (Railway) to solve the latency issue.

After starting the migration planning, the user introduced a major UI/UX redesign, providing detailed mockups. However, the core priority remains solving the performance issue. The session's work has been a cycle of creating, reviewing, and correcting a migration plan that has been repeatedly found to contain critical inaccuracies regarding the target platform's features and pricing. The current goal is to finalize a trustworthy, verifiable Proof-of-Concept (POC) plan to test Railway before committing to a full migration.

PRODUCT REQUIREMENTS:
1.  A scalable application with low latency (<500ms p99) for real-time auctions. This is the primary driver for the migration.
2.  A full UI/UX redesign based on user-provided mockups, to be implemented *after* the migration is complete.
3.  Robust backend features (auth, error monitoring, DB optimization) must be in place for the pilot.

**User's preferred language**: English

**what currently exists?**
The application consists of a FastAPI backend and a React frontend. The codebase includes a key stress-testing script (). The project is supported by extensive documentation created over multiple sessions, including , , , and a new .

This session focused heavily on identifying and attempting to fix critical flaws in the migration plan. It was discovered that Railway does not support Socket.IO sticky sessions, a key assumption the original plan was built on. This led to the creation of a  document, which outlines a plan to test a WebSocket-only transport as a viable alternative. Significant time was also spent clarifying the Emergent platform's deployment workflow, confirming that deployments are session-based and that preview/production environments have separate databases.

**Last working item**:
-   **Last item agent was working**: Refining the Proof-of-Concept (POC) deployment plan for Railway. After discovering that Railway does not support sticky sessions (a critical requirement for the app's current Socket.IO configuration), the strategy shifted. The new goal is to create a POC plan to test if a WebSocket-only transport is a viable alternative on Railway. The user provided a plan from another AI (Claude) and asked the agent to review it and incorporate the WebSocket-only focus.
-   **Status**: IN PROGRESS
-   **Agent Testing Done**: N/A
-   **Which testing method agent to use?**: N/A. The next step is for the user to execute the POC plan outlined in the markdown file.
-   **User Testing Done**: N/A

**All Pending/In progress Issue list**:
-   Issue 1: Flawed Migration Plan (P0)
-   Issue 2: Severe Performance Bottlenecks at Scale (P0)
-   Issue 3: Sticky Tabs on Mobile Not Working (P1)
-   Issue 4: Sub-optimal DB Calls Per Bid (P1)

**Issues Detail**:
-   **Issue 1: Flawed Migration Plan**
    -   **Description**: The migration plan to move the application to Railway has been repeatedly found to contain critical inaccuracies regarding pricing, plan names, and platform features. The most significant error was assuming Railway supports Socket.IO sticky sessions, which it does not.
    -   **Attempted fixes**: The plan was iteratively patched, but this eroded user trust. The current strategy is to create a Proof-of-Concept (POC) deployment plan () to get verified, factual data about the platform's capabilities before proceeding.
    -   **Next debug checklist**: Finalize the  document. It needs to be updated based on an external review (from Claude) and refocused to test a WebSocket-only transport for Socket.IO as the primary path to overcoming the sticky session limitation.
    -   **Why fix this issue and what will be achieved with the fix?**: A trustworthy migration plan is essential to solve the core performance problems blocking the user pilot. This POC is the necessary next step to build that trust.
    -   **Status**: IN PROGRESS
    -   **Is recurring issue?**: Y
    -   **Should Test frontend/backend/both after fix?**: N/A (Planning phase)

-   **Issue 2: Severe Performance Bottlenecks at Scale**
    -   **Description**: The application suffers from high latency (>700ms) for its UK user base due to being hosted in the US.
    -   **Next debug checklist**: This is an infrastructure problem. The solution is to execute the migration to a UK/EU hosting region.
    -   **Status**: BLOCKED (on the migration).

-   **Issue 3: Sticky Tabs on Mobile Not Working**
    -   **Description**: A recurring UI bug on  where tabs don't remain fixed on scroll.
    -   **Status**: NOT STARTED (this session).

-   **Issue 4: Sub-optimal DB Calls Per Bid**
    -   **Description**: The  endpoint is inefficient. A previous caching fix failed. The next step is to try using .
    -   **Status**: NOT STARTED (this session).

**In progress Task List**:
-   **Task 1: Finalize Railway POC Deployment Plan (P0)**
    -   **Where to resume**: Review the  file provided by the user (from Claude). Update the agent's local  file, merging the comprehensive structure from Claude's version while ensuring the primary goal is to test a WebSocket-only transport for Socket.IO.
    -   **What will be achieved with this?**: A concrete, verifiable, low-risk plan for the user to execute. This will provide definitive answers about Railway's suitability and de-risk the entire migration.
    -   **Status**: IN PROGRESS
    -   **Should Test frontend/backend/both after fix?**: N/A

**Upcoming and Future Tasks**
-   **Upcoming Tasks:**
    -   P0: User to execute the Railway POC deployment plan.
    -   P0: Update the main  and  with verified findings from the POC.
    -   P0: Execute the final, verified migration to the chosen platform.
    -   P1: Begin UI Redesign implementation, starting with low-risk screens like the Sign In page.
-   **Future Tasks:**
    -   P1: Implement Live Banter chat feature.
    -   P1: Harden authentication with email delivery for magic links.
    -   P2: Refactor the monolithic  into a modular architecture (a plan exists in ).
    -   P2: Implement remaining UI redesign pages (Profile, Stats, etc.).
    -   P2: Wrap the web app with Capacitor for mobile deployment.

**Completed work in this session**
-   **Migration Strategy Pivot**: Shifted from patching a flawed migration plan to creating a verifiable Proof-of-Concept (POC) plan to test assumptions on Railway directly.
-   **Platform Workflow Clarification**: Diagnosed and explained the Emergent platform's session-based deployment model, resolving user confusion about why different chat sessions had different deployment options and data.
-   **Codebase Analysis**: Performed a detailed analysis of the codebase, creating . This identified that  constitutes 55% of the backend code and proposed a low-risk refactoring strategy to be executed post-migration.
-   **UI Redesign Planning**: Reviewed user-provided mockups and HTML for a new UI, assessing implementation complexity and confirming a placeholder approach for features that are not yet built.
-   **Documentation**: Created  and . Updated  and  multiple times to reflect new findings.

**Code Architecture**


**All files of reference**
-   : **Most important file.** Contains the plan for the immediate next steps to validate the migration strategy.
-   : The strategic document for migration, which needs to be updated with POC findings.
-   : The tactical checklist for migration, also pending POC validation.
-   : A new document that breaks down the codebase and outlines a future refactoring plan for .
-   : A new document detailing the UI redesign based on user mockups.

**Critical Info for New Agent**
-   **User trust is low.** The user is frustrated after repeatedly finding critical errors in the agent's migration plans. All future plans and advice must be rigorously vetted. Do not make assumptions; verify them.
-   **The immediate focus is the Railway POC.** The main migration is blocked until the POC is executed to validate the WebSocket-only approach for Socket.IO, since Railway does not support sticky sessions. Your next action is to finalize the  document.
-   **Do not trust the existing migration documents (, ) as-is.** They are known to contain flawed assumptions that the POC is designed to correct.
-   **UI Redesign and Code Refactoring are deferred.** The user has agreed these will happen *after* a successful migration. Do not start implementation.
-   **Understand the platform workflow.** This is a forked job. The environment is an isolated sandbox with its own preview database, separate from production. Deployments are session-based (from the current workspace state), not from GitHub. This was a major point of confusion for the user.

**Last 10 User Messages and any pending HUMAN messages**
1.  **User**: States that we can use placeholders for unbuilt features in the new UI mockups.
2.  **Agent**: Agrees and suggests an implementation order for the redesign (lowest risk first), asking the user to prepare the corrected mockups.
3.  **User**: Expresses renewed doubt in the migration plan's accuracy, particularly regarding Railway's pricing and features, and shares feedback from another AI (Claude).
4.  **Agent**: Acknowledges Claude's findings are concerning and begins to verify them.
5.  **User**: Asks if the POC is pointless if Railway is known not to support sticky sessions and suggests looking at alternatives like Render or Fly.io.
6.  **Agent**: Verifies that Railway and Render do not support sticky sessions, but states that Fly.io does, and suggests a Fly.io POC instead.
7.  **User**: Prompts agent to continue.
8.  **Agent**: Corrects previous statement: Fly.io requires custom code for sticky sessions. Recommends proceeding with the Railway POC but focusing on testing a WebSocket-only transport, as it's the lowest-complexity solution.
9.  **User**: Agrees and asks the agent to update the POC plan with this new focus, using the v2 plan provided by Claude as a base.
10. **Agent**: Acknowledges the request and begins to extract the provided document.

**Project Health Check:**
-   **Broken**: Application performance at scale (the reason for migration). The migration plan itself.
-   **Mocked**:  and  have been created based on analysis and mockups.

**3rd Party Integrations**
-   **MongoDB Atlas**: The target database for the migration.
-   **Redis Cloud**: In use and will be used post-migration.
-   **Sentry**: Configured for backend error monitoring.
-   **Railway**: The *proposed* hosting platform, whose suitability is currently being validated via a POC plan.

**What agent forgot to execute**
- The agent has consistently failed to create a reliable, accurate migration plan, requiring multiple rounds of correction from the user and external reviews. The critical issue of sticky sessions was missed until the user and another AI pointed it out, which invalidated much of the planning work. This demonstrates a failure to verify key assumptions against primary documentation.</analysis>
